<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Dotfiles and stow üì• | Mattia Racca, D.Sc. </title> <meta name="author" content="Mattia Racca, D.Sc."> <meta name="description" content="Why having dotfiles version-controlled and stow-ed saved me from a ton of tedious work."> <meta name="keywords" content="research, robotics, human-robot-interaction, hri, robots"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/cuterobot.png?01767a58ea8f8c43e45dd84468e9289b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://mattiaracca.github.io/blog/2025/dotfiles/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Mattia</span> Racca, D.Sc. </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item"><a class="nav-link" href="/news/">news</a></li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item"><a class="nav-link" href="/assets/pdf/cv.pdf">curriculum vitae</a></li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Dotfiles and stow üì•</h1> <p class="post-meta"> Created in September 17, 2025 by Mattia Racca </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a> ¬† ¬∑ ¬† <a href="/blog/tag/linux"> <i class="fa-solid fa-hashtag fa-sm"></i> linux</a> ¬† <a href="/blog/tag/programming"> <i class="fa-solid fa-hashtag fa-sm"></i> programming</a> ¬† ¬∑ ¬† <a href="/blog/category/cs"> <i class="fa-solid fa-tag fa-sm"></i> cs</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <blockquote class="block-tip"> <p>This post is 100% GenAI-free. Read <a href="/blog/2025/experiment/">here</a> why.</p> </blockquote> <p>There are many things I did not get right when I started doing research ‚Äì back in <del>my days</del> 2015, when the ROS distro was Indigo, Python was at 2.7 but the default choice for robotics was mediocre C++ code or, worse, Matlab scripts. There are still many things that I do not get right today, but that‚Äôs a wider topic.</p> <p>There is however one habit I picked up from a Linux savvy friend fairly early in my career (beginning of 2018, looking at the git history) that I think helped me streamline something that I find incredible tedious: setting up a pc after a fresh Linux install.</p> <p><strong>tl;dr</strong>, I have a Github repo <a href="https://github.com/mattiaracca/dotfiles" rel="external nofollow noopener" target="_blank"><code class="language-plaintext highlighter-rouge">dotfiles</code></a> containing</p> <ul> <li>dotfiles (duh) (<code class="language-plaintext highlighter-rouge">.bashrc</code>, <code class="language-plaintext highlighter-rouge">.vimrc</code>, <code class="language-plaintext highlighter-rouge">.bash_aliases</code> and so on)</li> <li>an installation script <code class="language-plaintext highlighter-rouge">setup.sh</code> that I keep updated as my needs change and Ubuntu versioning advances.</li> </ul> <p>On a fresh install,</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/mattiaracca/dotfiles
<span class="nb">source </span>dotfiles/setup.sh
</code></pre></div></div> <p>and‚Ä¶ I have <strong>my machine</strong> back.</p> <blockquote class="block-warning"> <p>Disclaimer: Depending on your background, what I just described may be‚Ä¶ the norm. If that‚Äôs the case, this post is not for you, I‚Äôm afraid. It‚Äôs for robotics researchers who, by nature of the field, come from disparate backgrounds: computer science, computer/mechanical/electrical engineering‚Ä¶ and psychology, social sciences, and design if you look at the Human-Robot Interaction community.</p> </blockquote> <h2 id="why-versioning-dotfiles">Why versioning dotfiles</h2> <p>First, what are dotfiles? Brutally copy-pasted from <a href="https://www.datacamp.com/tutorial/dotfiles" rel="external nofollow noopener" target="_blank">this blog post</a></p> <blockquote> <p>Dotfiles are hidden configuration files on a Unix-based system that are hidden by default due to their unique prefix (.). These files store configurations, settings, and preferences for applications and tools, such as version control systems and editors. They make it easy for developers to create customized environments personalized to their workflows.</p> </blockquote> <p>Your <code class="language-plaintext highlighter-rouge">.bashrc</code> is a dotfile. The <code class="language-plaintext highlighter-rouge">.config</code> folder in your home is a standard place where applications expect dotfiles.</p> <p>Why a dotfiles repo? Because having all my dotfiles in one place let‚Äôs me</p> <ol> <li>avoid remembering or googling stuff like <em>does this dotfile go in <code class="language-plaintext highlighter-rouge">.config/</code> or directly in <code class="language-plaintext highlighter-rouge">~/</code>?</em> or <em>how to install zotero/zoom/dropbox/ros/texlive?</em>.</li> <li>have a growing library of custom commands and settings that I can just <code class="language-plaintext highlighter-rouge">git clone</code> </li> </ol> <p>It does make it hard for me to work on vanilla machines (<em>e.g.</em> computers of colleagues) because I don‚Äôt have my commands/aliases. But then again, that‚Äôs a pretty rare occasion.</p> <p>Versioning dotfiles is not really arcane magic. What really does it for me is the use of <code class="language-plaintext highlighter-rouge">stow</code> and having a <code class="language-plaintext highlighter-rouge">setup.sh</code>.</p> <h2 id="using-stow-to-handle-dotfiles">Using stow to handle dotfiles</h2> <p>The idea comes from <a href="https://brandon.invergo.net/news/2012-05-26-using-gnu-stow-to-manage-your-dotfiles.html" rel="external nofollow noopener" target="_blank">here</a> and I‚Äôll never be grateful enough. In short, you use the command <code class="language-plaintext highlighter-rouge">stow</code> to symlink your dotfiles (now neatly versioned in your <code class="language-plaintext highlighter-rouge">dotfiles</code> repo) where they are needed.</p> <p>Let‚Äôs say I want the versioned ssh <code class="language-plaintext highlighter-rouge">config</code> file to go where it usually sits at <code class="language-plaintext highlighter-rouge">~/.ssh/config</code>. In the repo root, I create a <code class="language-plaintext highlighter-rouge">ssh</code> folder, with inside the same folder structure of <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> (so a folder called <code class="language-plaintext highlighter-rouge">.ssh</code> with inside the <code class="language-plaintext highlighter-rouge">config</code> file).</p> <p>From the repo root, I then <code class="language-plaintext highlighter-rouge">stow ssh</code> and now the <code class="language-plaintext highlighter-rouge">config</code> is correctly symlinked where needed. If you make changes inside the dotfiles folder, they are immediately applied (it‚Äôs a symlink). If you or something changes them in <code class="language-plaintext highlighter-rouge">~/.ssh/config</code>, you‚Äôll see it with <code class="language-plaintext highlighter-rouge">git status</code>, ready to be committed (or discarded).</p> <p>Another example: <code class="language-plaintext highlighter-rouge">.vimrc</code> sits in <code class="language-plaintext highlighter-rouge">~/</code>. In the repo, create a <code class="language-plaintext highlighter-rouge">vim</code> folder, put inside your <code class="language-plaintext highlighter-rouge">.vimrc</code>, <code class="language-plaintext highlighter-rouge">stow vim</code>, done.</p> <p>This is what the <code class="language-plaintext highlighter-rouge">tree</code> command would give you from the root of the repo</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotfiles
‚îú‚îÄ‚îÄ ssh
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ .ssh
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ config
‚îî‚îÄ‚îÄ vim
    ‚îî‚îÄ‚îÄ .vimrc

</code></pre></div></div> <h3 id="machine-specific-dotfiles">Machine specific dotfiles</h3> <p>What if I have many machines and some settings are wrong/nonsensical/unnecessary for some machine?</p> <p>In that case, what works for me is to create machine specific scripts like <code class="language-plaintext highlighter-rouge">mylaptop.sh</code> and then have this at the end of my <code class="language-plaintext highlighter-rouge">.bashrc</code></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> ~/dotfiles/host_specific/<span class="nv">$HOSTNAME</span>.sh <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">source</span> ~/dotfiles/host_specific/<span class="nv">$HOSTNAME</span>.sh
<span class="k">fi</span>
</code></pre></div></div> <p>Like that, I have machine-specific commands, env variables, and the like.</p> <h2 id="the-setupsh">The <code class="language-plaintext highlighter-rouge">setup.sh</code> </h2> <p>The setup script builds on all of the above and provides an entrypoint on a fresh install. These are excerpts of <a href="https://github.com/MattiaRacca/dotfiles/blob/master/setup.sh" rel="external nofollow noopener" target="_blank">mine</a>, just to give you an idea of what I mean</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">===== Fresh installation =====</span><span class="se">\n</span><span class="s2">"</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>stow

<span class="nb">read</span> <span class="nt">-p</span> <span class="s1">'stow bash files? [y/n]: '</span> answer
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"y"</span> <span class="nt">-o</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span><span class="k">then
  </span><span class="nb">rm</span> ~/.bashrc
  <span class="nb">rm</span> ~/.bash_logout
  stow bash
<span class="k">fi

</span><span class="nb">read</span> <span class="nt">-p</span> <span class="s1">'Do you want vim? [y/n]: '</span> answer
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"y"</span> <span class="nt">-o</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span><span class="k">then
  </span><span class="nb">sudo </span>apt <span class="nb">install </span>vim
  stow vim
<span class="k">fi</span>
</code></pre></div></div> <p>It‚Äôs not just stowing. The script does things I always forget how to do, like, <em>e.g.</em> create a ssh key</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">read</span> <span class="nt">-p</span> <span class="s1">'Create SSH key? [y/n]: '</span> answer
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"y"</span> <span class="nt">-o</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span><span class="k">then
  </span>ssh-keygen <span class="nt">-t</span> ed25519 <span class="nt">-C</span> <span class="s2">"definitively@not_my.email"</span> <span class="nt">-f</span> ~/.ssh/id_ed25519
  ssh-add ~/.ssh/id_ed25519
<span class="k">fi</span>
</code></pre></div></div> <p>or install things that require more than a simple <code class="language-plaintext highlighter-rouge">apt install</code>, like <em>e.g.</em> zoom</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">read</span> <span class="nt">-p</span> <span class="s1">'Do you want Zoom? [y/n]: '</span> answer
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"y"</span> <span class="nt">-o</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$answer</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span><span class="k">then
  </span>wget <span class="nt">-O</span> /tmp/zoom.deb https://zoom.us/client/latest/zoom_amd64.deb
  <span class="nb">sudo </span>apt <span class="nt">-f</span> <span class="nb">install</span> /tmp/zoom.deb
  <span class="o">(</span>crontab <span class="nt">-l</span> <span class="p">;</span> <span class="nb">echo</span> <span class="s2">"@reboot nohup setsid zoom"</span><span class="o">)</span>| crontab -
<span class="k">fi</span>
</code></pre></div></div> <p>The ‚Äúsecret‚Äù here is maintaining the script over time, adding new procedures to it (better when you are doing a procedure manually for the first time), removing stuff that became irrelevant or obsolete, etc.</p> <p>I cannot estimate how much time this saved me (also because maintaining the repo does take some time every now and then). It sure improved my ‚ÄúLinux Hygiene‚Äù and made my actual work (doing research) much smoother.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h3 class="text-3xl font-semibold mb-4 mt-12">(Dis)liked what you read?</h3> <p class="mb-2">Let me know! Drop me an email at <i>mattia dot rh at gmail dot com</i> with <b>[BLOG]</b> in the subject. Some other posts:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/experiment/">A writing experiment</a> </li> </div> </div> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> ¬© Copyright 2025 Mattia Racca, D.Sc.. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>